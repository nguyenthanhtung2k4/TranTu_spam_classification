<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SpamHam Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&family=Space+Grotesk:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <main class="page">
      <header class="header">
        <div>
          <p class="eyebrow">Phân loại tin nhắn</p>
          <h1>SpamHam Studio</h1>
          <p class="subtitle">Dự đoán spam/ham theo nhiều model với ngưỡng tùy chỉnh.</p>
        </div>
        <div class="header-actions">
          <button id="historyToggle" class="btn secondary history-btn" type="button">
            Lịch sử
          </button>
          <button id="themeToggle" class="btn secondary icon-btn" type="button" aria-label="Chuyển sáng tối">
            <span class="icon sun" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path
                  d="M12 3.5a2 2 0 0 1 2 2V7a2 2 0 1 1-4 0V5.5a2 2 0 0 1 2-2Z"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                />
                <path
                  d="M12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z"
                  stroke="currentColor"
                  stroke-width="1.8"
                />
                <path
                  d="M4.5 12h1.7M17.8 12h1.7M7.1 6.6l1.2 1.2M15.7 15.2l1.2 1.2M6.6 16.9l1.2-1.2M15.2 8.3l1.2-1.2"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                />
              </svg>
            </span>
            <span class="icon moon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path
                  d="M20.2 14.3A7.8 7.8 0 1 1 9.7 3.8a7.2 7.2 0 0 0 10.5 10.5Z"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </span>
            <span class="icon-label">Sáng/Tối</span>
          </button>
        </div>
      </header>

      <section class="panel config">
        <label class="field">
          <span>Model</span>
          <select id="modelSelect"></select>
        </label>
        <label class="field">
          <span>Ngưỡng spam (0 - 1)</span>
          <input id="thresholdInput" type="number" min="0" max="1" step="0.01" />
        </label>
      </section>

      <section class="tabs">
        <button id="tabTextBtn" class="tab-btn active" type="button">Dự đoán văn bản</button>
        <button id="tabFileBtn" class="tab-btn" type="button">Dự đoán từ file</button>
      </section>

      <section id="tabText" class="panel tab-content active">
        <label class="field">
          <span>Nội dung tin nhắn</span>
          <textarea
            id="textInput"
            rows="6"
            placeholder="Nhập nội dung tin nhắn cần kiểm tra spam/ham..."
          ></textarea>
        </label>
        <button id="predictTextBtn" class="btn primary" type="button">Dự đoán</button>
        <div id="textResult" class="result-card hidden"></div>
      </section>

      <section id="tabFile" class="panel tab-content">
        <div id="dropZone" class="drop-zone">
          <p>Kéo thả file vào đây hoặc bấm để chọn file</p>
        </div>
        <label class="field">
          <span>File batch (.txt, .csv, .xlsx)</span>
          <input id="fileInput" type="file" accept=".txt,.csv,.xlsx" />
        </label>
        <label class="field">
          <span>Tên cột văn bản (tuỳ chọn, mặc định: text)</span>
          <input id="textColumnInput" type="text" placeholder="text" />
        </label>
        <button id="predictFileBtn" class="btn primary" type="button">Dự đoán file</button>
        <a id="downloadLink" class="btn secondary hidden" href="#" target="_blank">Tải CSV kết quả</a>
        <div class="table-wrap">
          <table id="previewTable">
            <thead>
              <tr>
                <th>STT</th>
                <th>Văn bản</th>
                <th>Nhãn</th>
                <th>Điểm spam</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <p id="statusText" class="status"></p>
    </main>
    <div id="historyOverlay" class="history-overlay hidden"></div>
    <section id="historyPanel" class="history-panel hidden">
      <div class="history-header">
        <h3>Lịch sử gửi dữ liệu</h3>
        <button id="historyClose" class="btn secondary" type="button">Đóng</button>
      </div>
      <div class="history-body">
        <ul id="historyList" class="history-list"></ul>
        <div id="historyDetail" class="history-detail">
          <p>Chọn một mục để xem chi tiết.</p>
        </div>
      </div>
    </section>
    <script src="./app.js"></script>
  </body>
</html>
